# Docker composer file reference version
version: '3.7'

services:
  # Web service
  web:
    image: shincoder/homestead:php7.2
    restart: always
    ports:
      # Web
      - "8000:80"
      # SSH
      - "2222:22"
      # Live reload
      - "35729:35729"
      # Karma server
      - "9876:9876"
    volumes:
      # Composer caching
      - ~/.composer:/home/homestead/.composer
      # Git configuration (access alias && config)
      - ~/.gitconfig:/home/homestead/.gitconfig 
      # SSH keys for easy deployment inside the container
      - ~/.ssh:/home/homestead/.ssh
      # All apps
      - ~/apps:/apps
      # Nginx sites (in case you recreate the container)
      - ~/apps/volumes/nginx/sites-available:/etc/nginx/sites-available
      - ~/apps/volumes/nginx/sites-enabled:/etc/nginx/sites-enabled
    links:
      - mariadb
          
  # Database service
  mariadb:
    image: mariadb:10
    restart: always
    ports:
      - "33060:3306"
    environment:
      MYSQL_USER: admin
      MYSQL_PASSWORD: root
      MYSQL_ROOT_PASSWORD: root
    volumes:
      # A bind-mount volume for persistent database files
      - ~/apps/volumes/mysql:/var/lib/mysql
     